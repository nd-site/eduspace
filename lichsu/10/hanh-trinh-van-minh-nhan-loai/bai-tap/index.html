<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ Thống Phân Tích Lịch Sử - EduSpace</title>
    <link rel="icon" href="/logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; height: 350px; }
        
        /* Sidebar Styles */
        .sidebar-item {
            transition: all 0.2s ease;
        }
        .sidebar-item.active { 
            background-color: #0F766E; 
            color: white; 
            border-color: #0F766E;
        }
        .sidebar-item.visited { 
            border-color: #0F766E;
            color: #0F766E;
        }
        
        /* Navigation & Content */
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Eduspace Template Constants */
        :root {
            --color-teal: #0F766E;
            --color-orange: #C2410C;
            --color-blue: #1E3A8A;
        }
    </style>
    <script src="/nd-navbar.js" defer></script></head>
<body class="bg-[#F3F4F6] text-slate-800 overflow-x-hidden">
    <div class="navigation-buttons" style="margin-top:20px; text-align:center;">
      <!-- Nút làm học bài -->
      <a href="/eduspace/lichsu/10/hanh-trinh-van-minh-nhan-loai/index.html" 
         class="btn" 
         style="padding:10px 20px; margin:5px; background:#4CAF50; color:white; text-decoration:none; border-radius:5px;">
         Học bài
      </a>
    
      <!-- Nút trang chủ -->
      <a href="/index.html" 
         class="btn" 
         style="padding:10px 20px; margin:5px; background:#2196F3; color:white; text-decoration:none; border-radius:5px;">
         Trang chủ
      </a>
    
      <!-- Nút quay lại -->
      <a href="/eduspace" 
         class="btn" 
         style="padding:10px 20px; margin:5px; background:#f44336; color:white; text-decoration:none; border-radius:5px;">
         Quay lại
      </a>
    </div>
    
    <!-- Top Navigation (Exam Header Style) -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1600px] mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="bg-teal-700 text-white w-10 h-10 flex items-center justify-center rounded-lg font-bold text-xl shadow-lg shadow-teal-700/20">E</div>
                <div class="hidden md:block">
                    <h1 class="font-bold text-lg leading-none italic">EduSpace <span class="text-teal-700">Exam System</span></h1>
                    <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mt-1">Phân tích dữ liệu lịch sử</p>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="flex-1 max-w-2xl mx-12 hidden lg:block">
                <div class="flex justify-between mb-1.5 text-[10px] font-black text-slate-500">
                    <span class="uppercase">Tiến độ tìm hiểu dữ liệu</span>
                    <span id="progress-text">25%</span>
                </div>
                <div class="w-full bg-slate-200 h-2.5 rounded-full p-0.5">
                    <div id="progress-bar" class="bg-gradient-to-r from-teal-600 to-teal-400 h-full rounded-full transition-all duration-700 shadow-[0_0_8px_rgba(15,118,110,0.4)]" style="width: 25%;"></div>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <div class="text-right border-r border-slate-200 pr-6 hidden sm:block">
                    <p class="text-[10px] text-slate-400 font-black uppercase tracking-tighter">Thời gian truy cập</p>
                    <p id="timer" class="font-mono font-bold text-orange-600 text-lg">45:00</p>
                </div>
                <button class="bg-teal-700 text-white px-8 py-2.5 rounded-lg font-bold text-sm hover:bg-teal-800 transition transform active:scale-95 shadow-md shadow-teal-700/30">Nộp bài</button>
            </div>
        </div>
    </header>

    <div class="max-w-[1600px] mx-auto flex flex-col md:flex-row min-h-[calc(100vh-64px)]">
        
        <!-- Main Content (Exam Question Area) -->
        <main class="flex-1 p-4 md:p-10 order-2 md:order-1 overflow-y-auto">
            <div class="bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200 min-h-[600px] flex flex-col overflow-hidden">
                <!-- Header câu hỏi -->
                <div class="px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                    <div>
                        <span id="step-tag" class="text-[10px] font-black px-2 py-0.5 bg-orange-100 text-orange-700 rounded uppercase mr-2">Dữ liệu thô</span>
                        <h2 id="section-title" class="text-2xl font-black text-teal-800 mt-2">Câu 1: Cấu trúc lịch sử toàn cầu</h2>
                    </div>
                    <div class="flex gap-2">
                        <button title="Lưu nhãn" class="w-10 h-10 rounded-full border border-slate-200 flex items-center justify-center hover:bg-white hover:text-orange-600 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" /></svg>
                        </button>
                    </div>
                </div>

                <!-- Nội dung các câu hỏi -->
                <div class="p-8 flex-grow">
                    <!-- Section 1 -->
                    <div id="section-1" class="content-section active">
                        <p class="text-slate-500 font-medium mb-10 border-l-4 border-teal-700 pl-4 bg-slate-50 py-3">Phân tích sự phân bổ đóng góp của các kỷ nguyên văn minh dựa trên các tập dữ liệu khảo cổ và kinh tế học lịch sử.</p>
                        <div class="grid grid-cols-1 lg:grid-cols-5 gap-10">
                            <div class="lg:col-span-3">
                                <div class="chart-container">
                                    <canvas id="distributionChart"></canvas>
                                </div>
                            </div>
                            <div class="lg:col-span-2 space-y-4">
                                <div class="p-6 bg-slate-50 rounded-2xl border border-slate-200">
                                    <h4 class="font-black text-xs text-slate-400 uppercase tracking-[0.2em] mb-6">Chi tiết tỉ trọng:</h4>
                                    <div class="space-y-4">
                                        <div class="flex items-center gap-4">
                                            <div class="w-3 h-3 rounded-full bg-[#1E3A8A]"></div>
                                            <span class="text-sm font-bold flex-1">Cổ đại Phương Đông</span>
                                            <span class="text-teal-700 font-black">48%</span>
                                        </div>
                                        <div class="flex items-center gap-4">
                                            <div class="w-3 h-3 rounded-full bg-[#0F766E]"></div>
                                            <span class="text-sm font-bold flex-1">Cổ đại Phương Tây</span>
                                            <span class="text-teal-700 font-black">15%</span>
                                        </div>
                                        <div class="flex items-center gap-4">
                                            <div class="w-3 h-3 rounded-full bg-[#C2410C]"></div>
                                            <span class="text-sm font-bold flex-1">Cách mạng Công nghiệp</span>
                                            <span class="text-teal-700 font-black">33%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section 2 -->
                    <div id="section-2" class="content-section">
                        <p class="text-slate-500 font-medium mb-10 border-l-4 border-teal-700 pl-4 bg-slate-50 py-3">Phân tích sâu về các thành tựu của văn minh Trung Hoa thông qua các chỉ số kỹ thuật và kiến trúc.</p>
                        <div class="grid grid-cols-1 lg:grid-cols-5 gap-10">
                            <div class="lg:col-span-3">
                                <div class="chart-container">
                                    <canvas id="ancientEastChart"></canvas>
                                </div>
                            </div>
                            <div class="lg:col-span-2 space-y-4">
                                <div class="p-5 border border-teal-100 rounded-xl bg-teal-50/50">
                                    <h5 class="text-teal-800 font-bold mb-2 italic">Phát minh (Kỹ thuật)</h5>
                                    <p class="text-sm text-slate-600 italic leading-relaxed">Giấy, in ấn và thuốc súng chiếm tỷ trọng ảnh hưởng cao nhất (9.5/10) trong sự lan tỏa văn hóa.</p>
                                </div>
                                <div class="p-5 border border-orange-100 rounded-xl bg-orange-50/30">
                                    <h5 class="text-orange-800 font-bold mb-2 italic">Di sản kiến trúc</h5>
                                    <p class="text-sm text-slate-600 italic leading-relaxed">Vạn Lý Trường Thành là đại diện tiêu biểu cho sức mạnh quản lý nhân lực (8.5/10).</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section 3 -->
                    <div id="section-3" class="content-section">
                        <p class="text-slate-500 font-medium mb-10 border-l-4 border-teal-700 pl-4 bg-slate-50 py-3">So sánh đa chiều đặc tính văn minh của Hy Lạp và La Mã để xác định nền tảng tư duy Phương Tây.</p>
                        <div class="flex justify-center bg-slate-900 rounded-[2rem] p-10 shadow-inner">
                            <div class="chart-container max-w-lg">
                                <canvas id="classicalRadarChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Section 4 -->
                    <div id="section-4" class="content-section">
                        <p class="text-slate-500 font-medium mb-10 border-l-4 border-teal-700 pl-4 bg-slate-50 py-3">Theo dõi sự tăng trưởng năng suất lao động từ thời đại Jenny (1764) đến kỷ nguyên hàng không (1903).</p>
                        <div class="chart-container bg-white p-6 rounded-2xl border border-slate-100 shadow-inner">
                            <canvas id="industrialChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Footer điều hướng (Prev/Next) -->
                <div class="px-8 py-6 border-t border-slate-100 flex justify-between items-center bg-slate-50/30">
                    <button id="prev-btn" onclick="prevStep()" class="flex items-center gap-2 px-6 py-3 border border-slate-200 rounded-xl font-bold text-slate-500 hover:bg-white hover:text-teal-700 hover:border-teal-700 transition disabled:opacity-30 disabled:pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                        Câu trước
                    </button>
                    
                    <div class="hidden sm:flex items-center gap-2 text-slate-400 font-bold text-xs uppercase tracking-widest">
                        <span id="current-page-display">1</span> / 4 MỤC DỮ LIỆU
                    </div>

                    <button id="next-btn" onclick="nextStep()" class="flex items-center gap-2 px-10 py-3 bg-teal-700 text-white rounded-xl font-bold hover:bg-teal-800 shadow-lg shadow-teal-700/30 transition transform active:scale-95">
                        Câu tiếp theo
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Sidebar (Question Matrix) -->
        <aside class="w-full md:w-[380px] p-4 md:p-10 bg-white border-l border-slate-200 order-1 md:order-2">
            <div class="sticky top-24">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="font-black text-slate-400 text-xs uppercase tracking-[0.2em]">Danh sách câu hỏi</h3>
                    <span class="text-[10px] font-bold text-teal-700 bg-teal-50 px-2 py-0.5 rounded">Tự động lưu</span>
                </div>
                
                <div class="grid grid-cols-5 gap-3">
                    <button onclick="goToSection(1)" id="nav-1" class="sidebar-item active w-full aspect-square border-2 border-slate-200 rounded-xl font-black text-sm flex items-center justify-center hover:border-teal-700">1</button>
                    <button onclick="goToSection(2)" id="nav-2" class="sidebar-item w-full aspect-square border-2 border-slate-200 rounded-xl font-black text-sm flex items-center justify-center hover:border-teal-700">2</button>
                    <button onclick="goToSection(3)" id="nav-3" class="sidebar-item w-full aspect-square border-2 border-slate-200 rounded-xl font-black text-sm flex items-center justify-center hover:border-teal-700">3</button>
                    <button onclick="goToSection(4)" id="nav-4" class="sidebar-item w-full aspect-square border-2 border-slate-200 rounded-xl font-black text-sm flex items-center justify-center hover:border-teal-700">4</button>
                    
                    <!-- Placeholder buttons for exam look -->
                    <div class="w-full aspect-square border border-dashed border-slate-200 rounded-xl flex items-center justify-center opacity-20 text-[8px] font-bold">5</div>
                    <div class="w-full aspect-square border border-dashed border-slate-200 rounded-xl flex items-center justify-center opacity-10 text-[8px] font-bold">6</div>
                </div>

                <div class="mt-12 space-y-4">
                    <div class="p-6 bg-slate-50 rounded-2xl border border-slate-100">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-2 h-2 rounded-full bg-orange-500 animate-pulse"></div>
                            <h4 class="text-slate-700 font-bold text-sm">Hướng dẫn hệ thống:</h4>
                        </div>
                        <p class="text-xs text-slate-500 leading-relaxed">
                            Vui lòng xem kỹ từng biểu đồ trước khi chuyển sang câu tiếp theo. Dữ liệu được trích xuất từ nguồn chính thống của <strong>EduSpace Labs</strong>.
                        </p>
                    </div>

                    <div class="flex items-center justify-center gap-6 pt-4">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 bg-teal-700 rounded shadow-sm"></div>
                            <span class="text-[10px] font-bold text-slate-400">ĐANG XEM</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 border-2 border-teal-700 rounded shadow-sm"></div>
                            <span class="text-[10px] font-bold text-slate-400">ĐÃ XONG</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script>
        const COLORS = {
            teal: '#0F766E',
            orange: '#C2410C',
            blue: '#1E3A8A',
            slate: '#94A3B8',
            tealLight: 'rgba(15, 118, 110, 0.15)',
            orangeLight: 'rgba(194, 65, 12, 0.15)'
        };

        const SECTIONS = [
            { title: "Câu 1: Cấu trúc lịch sử toàn cầu", tag: "Dữ liệu thô" },
            { title: "Câu 2: Phân tích Văn minh Trung Hoa", tag: "Kỹ thuật & Kiến trúc" },
            { title: "Câu 3: Hy Lạp & La Mã: Đối trọng tư duy", tag: "So sánh đa chiều" },
            { title: "Câu 4: Bùng nổ Cách mạng Công nghiệp", tag: "Hiệu năng sản xuất" }
        ];

        let currentStep = 1;

        function updateUI() {
            // Update sections display
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.getElementById(`section-${currentStep}`).classList.add('active');

            // Update Header labels
            document.getElementById('section-title').innerText = SECTIONS[currentStep-1].title;
            document.getElementById('step-tag').innerText = SECTIONS[currentStep-1].tag;
            document.getElementById('current-page-display').innerText = currentStep;

            // Update Sidebar buttons
            document.querySelectorAll('.sidebar-item').forEach(s => s.classList.remove('active'));
            const currentNav = document.getElementById(`nav-${currentStep}`);
            currentNav.classList.add('active');
            currentNav.classList.add('visited');

            // Update Progress Bar
            const progress = (currentStep / SECTIONS.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').innerText = `${Math.round(progress)}%`;

            // Update Prev/Next buttons
            document.getElementById('prev-btn').disabled = (currentStep === 1);
            const nextBtn = document.getElementById('next-btn');
            if (currentStep === SECTIONS.length) {
                nextBtn.innerHTML = 'Hoàn thành bài &rarr;';
                nextBtn.classList.replace('bg-teal-700', 'bg-orange-700');
            } else {
                nextBtn.innerHTML = 'Câu tiếp theo &rarr;';
                nextBtn.classList.replace('bg-orange-700', 'bg-teal-700');
            }
        }

        function nextStep() {
            if (currentStep < SECTIONS.length) {
                currentStep++;
                updateUI();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateUI();
            }
        }

        function goToSection(step) {
            currentStep = step;
            updateUI();
        }

        // Timer Logic
        let timeLeft = 45 * 60;
        setInterval(() => {
            if (timeLeft > 0) {
                timeLeft--;
                const m = Math.floor(timeLeft / 60);
                const s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            }
        }, 1000);

        // Chart Initialization
        window.onload = function() {
            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.color = '#64748b';

            // Distribution Chart
            new Chart(document.getElementById('distributionChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Cổ Đại Đông', 'Cổ Đại Tây', 'Công Nghiệp', 'Khác'],
                    datasets: [{
                        data: [48, 15, 33, 4],
                        backgroundColor: [COLORS.blue, COLORS.teal, COLORS.orange, COLORS.slate],
                        borderWidth: 8,
                        borderColor: '#ffffff',
                        hoverOffset: 30
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: { legend: { display: false } }
                }
            });

            // Ancient East Chart
            new Chart(document.getElementById('ancientEastChart'), {
                type: 'bar',
                indexAxis: 'y',
                data: {
                    labels: ['Kỹ Thuật', 'Tôn Giáo', 'Kiến Trúc', 'Văn Học'],
                    datasets: [{
                        data: [9.5, 7, 8.5, 6],
                        backgroundColor: [COLORS.orange, COLORS.teal, COLORS.blue, COLORS.slate],
                        borderRadius: 8,
                        barThickness: 32
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { 
                        x: { grid: { display: false }, beginAtZero: true, max: 10 },
                        y: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            // Radar Chart
            new Chart(document.getElementById('classicalRadarChart'), {
                type: 'radar',
                data: {
                    labels: ['Triết Học', 'Ứng Dụng', 'Luật Pháp', 'Nghệ Thuật', 'Khoa Học'],
                    datasets: [{
                        label: 'Hy Lạp',
                        data: [9, 7, 5, 9, 8],
                        backgroundColor: COLORS.tealLight,
                        borderColor: COLORS.teal,
                        borderWidth: 3,
                        pointBackgroundColor: COLORS.teal
                    }, {
                        label: 'La Mã',
                        data: [5, 9, 10, 6, 6],
                        backgroundColor: COLORS.orangeLight,
                        borderColor: COLORS.orange,
                        borderWidth: 3,
                        pointBackgroundColor: COLORS.orange
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { 
                        r: { 
                            grid: { color: 'rgba(255,255,255,0.08)' }, 
                            angleLines: { color: 'rgba(255,255,255,0.08)' },
                            pointLabels: { color: '#94a3b8', font: { weight: 'bold' } },
                            ticks: { display: false }
                        } 
                    },
                    plugins: { legend: { labels: { color: '#fff', padding: 20 } } }
                }
            });

            // Industrial Chart
            new Chart(document.getElementById('industrialChart'), {
                type: 'bar',
                data: {
                    labels: ['Jenny (1764)', 'Watt (1784)', 'Fulton (1807)', 'Stephenson', 'Wright (1903)'],
                    datasets: [{
                        data: [30, 90, 65, 80, 95],
                        backgroundColor: COLORS.blue,
                        hoverBackgroundColor: COLORS.orange,
                        borderRadius: 12,
                        barThickness: 45
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { 
                        y: { beginAtZero: true, grid: { color: '#f1f5f9' } },
                        x: { grid: { display: false } }
                    }
                }
            });
        };
    </script>
</body>
</html>