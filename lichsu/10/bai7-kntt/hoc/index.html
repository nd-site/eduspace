<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lịch sử 10 - Bài 7: Cách mạng công nghiệp thời hiện đại | EduSpace by ND Labs</title>
    <link rel="icon" href="/logo.png" type="image/x-icon">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        modern: {
                            50: '#f0f7ff',
                            100: '#e0effe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .textbook-card { 
            background: white; 
            border: 1px solid #e2e8f0; 
            border-radius: 12px; 
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .section-tag {
            display: inline-block;
            padding: 2px 10px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }
        .highlight-blue { border-left: 4px solid #3b82f6; padding-left: 1rem; }
        .highlight-purple { border-left: 4px solid #a855f7; padding-left: 1rem; }
        .list-item { position: relative; padding-left: 1.5rem; margin-bottom: 0.75rem; font-size: 0.95rem; line-height: 1.6; }
        .list-item::before { content: "→"; position: absolute; left: 0; color: #3b82f6; font-weight: bold; }
        .content-nav { scroll-margin-top: 5rem; }
    </style>
    <script src="/nd-navbar.js" defer></script></head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header -->
    <header class="sticky top-0 z-40 w-full bg-white/95 backdrop-blur border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <a href="/eduspace" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
                    <img src="/logo.png" alt="EduSpace Logo" class="w-10 h-10 object-contain rounded-lg shadow-sm" onerror="this.src='https://placehold.co/100x100?text=ES'">
                    <div>
                        <h1 class="font-bold text-lg text-slate-900 leading-tight">EduSpace</h1>
                        <p class="text-[10px] text-modern-600 uppercase tracking-widest font-black">by ND Labs</p>
                    </div>
                </a>
            </div>
            
            <nav class="hidden lg:flex gap-8 text-sm font-medium text-slate-600">
                <a href="#cmcn3" class="hover:text-modern-600 transition-colors">CMCN Lần 3</a>
                <a href="#cmcn4" class="hover:text-modern-600 transition-colors">CMCN Lần 4</a>
                <a href="#y-nghia" class="hover:text-modern-600 transition-colors">Ý nghĩa & Tác động</a>
            </nav>

            <div class="flex items-center gap-3">
                <button id="open-settings" class="p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors" title="Cài đặt API">
                    <i data-lucide="settings" class="w-5 h-5"></i>
                </button>
                <a href="/eduspace" class="hidden sm:flex items-center gap-2 bg-modern-600 hover:bg-modern-700 text-white px-4 py-2 rounded-full text-xs font-bold transition-all shadow-md shadow-modern-100">
                    <i data-lucide="home" class="w-4 h-4"></i>
                    TRANG CHỦ
                </a>
            </div>
        </div>
    </header>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm hidden items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <h3 class="font-bold text-slate-900 flex items-center gap-2"><i data-lucide="key" class="w-5 h-5 text-modern-500"></i> Cấu hình API</h3>
                <button id="close-settings" class="text-slate-400 hover:text-slate-600"><i data-lucide="x"></i></button>
            </div>
            <div class="p-6 space-y-4">
                <p class="text-sm text-slate-500">Vui lòng nhập API Key từ <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-modern-600 underline">Google AI Studio</a> để sử dụng tính năng Trợ lý AI.</p>
                <div>
                    <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Gemini API Key</label>
                    <input type="password" id="user-api-key" placeholder="Dán mã API của bạn tại đây..." class="w-full px-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-modern-500 focus:outline-none">
                </div>
                <div id="save-msg" class="text-[10px] text-emerald-600 hidden">Đã lưu API Key thành công!</div>
            </div>
            <div class="p-4 bg-slate-50 flex justify-end gap-3 text-right">
                <button id="save-settings" class="bg-modern-600 text-white px-6 py-2 rounded-xl font-bold text-xs shadow-lg shadow-modern-100 hover:bg-modern-700">LƯU CẤU HÌNH</button>
            </div>
        </div>
    </div>

    <!-- Hero -->
    <div class="bg-modern-900 text-white py-20 relative overflow-hidden">
        <div class="absolute inset-0 opacity-10">
            <svg width="100%" height="100%"><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="white" stroke-width="1"/></pattern><rect width="100%" height="100%" fill="url(#grid)" /></svg>
        </div>
        <div class="max-w-7xl mx-auto px-4 relative z-10 text-center lg:text-left">
            <h2 class="text-modern-400 font-bold mb-3 uppercase tracking-widest text-sm lg:text-base">Chương IV: Các cuộc cách mạng công nghiệp trong lịch sử thế giới</h2>
            <h1 class="text-4xl md:text-6xl font-black mb-8 tracking-tight leading-tight">CÁCH MẠNG CÔNG NGHIỆP <br><span class="text-modern-500">THỜI KỲ HIỆN ĐẠI</span></h1>
            <div class="flex flex-wrap justify-center lg:justify-start gap-4 text-sm">
                <span class="bg-white/10 px-4 py-2 rounded-full border border-white/20 backdrop-blur">Lần 3: Cách mạng kĩ thuật số</span>
                <span class="bg-white/10 px-4 py-2 rounded-full border border-white/20 backdrop-blur">Lần 4: Cách mạng thông minh</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-12">
        <div class="grid lg:grid-cols-12 gap-12">
            
            <!-- Left Content Area -->
            <div class="lg:col-span-8 space-y-16">
                
                <!-- Section 1: CMCN Lần 3 -->
                <section id="cmcn3" class="content-nav">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 bg-modern-600 text-white rounded-2xl flex items-center justify-center font-bold text-xl shadow-lg">01</div>
                        <div>
                            <div class="section-tag bg-modern-100 text-modern-700">Nửa sau thế kỉ XX</div>
                            <h2 class="text-3xl font-black text-slate-900 tracking-tight">Cuộc cách mạng công nghiệp lần thứ ba</h2>
                        </div>
                    </div>

                    <div class="space-y-8">
                        <div class="textbook-card highlight-blue">
                            <h3 class="font-bold text-xl text-slate-900 mb-4 flex items-center gap-2">
                                <i data-lucide="compass" class="w-6 h-6 text-modern-500"></i> Bối cảnh lịch sử
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="bg-slate-50 p-5 rounded-xl border border-slate-100">
                                    <p class="font-bold text-sm text-modern-600 mb-2 uppercase tracking-wide">Nhu cầu thực tiễn</p>
                                    <p class="text-sm text-slate-700 leading-relaxed">
                                        Sau Thế chiến II, nhân loại đối mặt với nhu cầu phục hồi kinh tế, bùng nổ dân số và cạn kiệt tài nguyên. Yêu cầu về năng suất lao động và cải thiện chất lượng sống trở nên cấp thiết.
                                    </p>
                                </div>
                                <div class="bg-slate-50 p-5 rounded-xl border border-slate-100">
                                    <p class="font-bold text-sm text-modern-600 mb-2 uppercase tracking-wide">Tiền đề khoa học</p>
                                    <p class="text-sm text-slate-700 leading-relaxed">
                                        Sự tích lũy từ các cuộc CMCN trước đó cùng những phát kiến vĩ đại của khoa học lý thuyết (vật lý lượng tử, thuyết tương đối) tạo nền tảng vững chắc.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h3 class="font-bold text-xl text-slate-900 mb-4">Các thành tựu tiêu biểu</h3>
                            
                            <div class="grid sm:grid-cols-2 gap-4">
                                <div class="textbook-card border-none bg-slate-100/50 hover:bg-white hover:shadow-lg transition-all">
                                    <div class="w-10 h-10 bg-blue-500 text-white rounded-lg flex items-center justify-center mb-4 shadow-sm">
                                        <i data-lucide="cpu" class="w-5 h-5"></i>
                                    </div>
                                    <h4 class="font-bold mb-2">Máy tính điện tử</h4>
                                    <p class="text-sm text-slate-600 leading-relaxed">
                                        Sự ra đời của chiếc máy tính ENIAC (1946) đánh dấu bước ngoặt. Khả năng tính toán khổng lồ thay thế dần lao động trí óc của con người.
                                    </p>
                                </div>
                                <div class="textbook-card border-none bg-slate-100/50 hover:bg-white hover:shadow-lg transition-all">
                                    <div class="w-10 h-10 bg-indigo-500 text-white rounded-lg flex items-center justify-center mb-4 shadow-sm">
                                        <i data-lucide="globe" class="w-5 h-5"></i>
                                    </div>
                                    <h4 class="font-bold mb-2">Internet & Viễn thông</h4>
                                    <p class="text-sm text-slate-600 leading-relaxed">
                                        Mạng Internet toàn cầu và vệ tinh nhân tạo tạo ra một xã hội kết nối, giúp thông tin truyền tải tức thời bất kể khoảng cách.
                                    </p>
                                </div>
                                <div class="textbook-card border-none bg-slate-100/50 hover:bg-white hover:shadow-lg transition-all">
                                    <div class="w-10 h-10 bg-amber-500 text-white rounded-lg flex items-center justify-center mb-4 shadow-sm">
                                        <i data-lucide="zap" class="w-5 h-5"></i>
                                    </div>
                                    <h4 class="font-bold mb-2">Năng lượng mới</h4>
                                    <p class="text-sm text-slate-600 leading-relaxed">
                                        Khai thác năng lượng nguyên tử, năng lượng mặt trời, gió và thủy triều thay thế dần cho nhiên liệu hóa thạch truyền thống.
                                    </p>
                                </div>
                                <div class="textbook-card border-none bg-slate-100/50 hover:bg-white hover:shadow-lg transition-all">
                                    <div class="w-10 h-10 bg-emerald-500 text-white rounded-lg flex items-center justify-center mb-4 shadow-sm">
                                        <i data-lucide="dna" class="w-5 h-5"></i>
                                    </div>
                                    <h4 class="font-bold mb-2">Công nghệ sinh học</h4>
                                    <p class="text-sm text-slate-600 leading-relaxed">
                                        Thuyết tế bào, di truyền học và bản đồ gen người tạo đột phá trong nông nghiệp, y học (kháng sinh, vaccine).
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="border-slate-200">

                <!-- Section 2: CMCN Lần 4 -->
                <section id="cmcn4" class="content-nav">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 bg-purple-600 text-white rounded-2xl flex items-center justify-center font-bold text-xl shadow-lg">02</div>
                        <div>
                            <div class="section-tag bg-purple-100 text-purple-700">Đầu thế kỉ XXI - Nay</div>
                            <h2 class="text-3xl font-black text-slate-900 tracking-tight">Cuộc cách mạng công nghiệp lần thứ tư</h2>
                        </div>
                    </div>

                    <div class="space-y-8">
                        <div class="textbook-card highlight-purple">
                            <h3 class="font-bold text-xl text-slate-900 mb-4 flex items-center gap-2">
                                <i data-lucide="boxes" class="w-6 h-6 text-purple-500"></i> Đặc trưng cơ bản
                            </h3>
                            <p class="text-sm text-slate-700 leading-relaxed">
                                Được gọi là cuộc cách mạng "thông minh", dựa trên nền tảng kỹ thuật số nhưng tích hợp nhiều công nghệ mới giúp xóa nhòa ranh giới giữa các lĩnh vực **Vật lý - Kỹ thuật số - Sinh học**.
                            </p>
                        </div>

                        <div class="space-y-6">
                            <h3 class="font-bold text-xl text-slate-900">Các trụ cột công nghệ then chốt</h3>
                            
                            <!-- AI Focus -->
                            <div class="flex flex-col md:flex-row gap-6 bg-white border border-slate-200 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                                <div class="md:w-1/3 shrink-0">
                                    <div class="aspect-square bg-purple-50 rounded-xl flex items-center justify-center">
                                        <i data-lucide="brain-circuit" class="w-20 h-20 text-purple-600 animate-pulse"></i>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="text-lg font-black text-purple-700 mb-2 uppercase tracking-wide">Trí tuệ nhân tạo (AI)</h4>
                                    <p class="text-sm text-slate-600 leading-relaxed mb-4">
                                        Đây là linh hồn của CMCN 4.0. AI không chỉ là các thuật toán, mà là khả năng tự học (Machine Learning) và tự đưa ra quyết định dựa trên dữ liệu, thay thế con người trong các công việc phức tạp.
                                    </p>
                                    <ul class="space-y-2">
                                        <li class="flex items-center gap-2 text-xs font-medium text-slate-500 bg-slate-50 p-2 rounded">
                                            <i data-lucide="check-circle-2" class="w-4 h-4 text-emerald-500"></i>
                                            Xử lý ngôn ngữ tự nhiên
                                        </li>
                                        <li class="flex items-center gap-2 text-xs font-medium text-slate-500 bg-slate-50 p-2 rounded">
                                            <i data-lucide="check-circle-2" class="w-4 h-4 text-emerald-500"></i>
                                            Nhận diện hình ảnh và giọng nói
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="grid sm:grid-cols-2 gap-4">
                                <div class="p-5 bg-white border border-slate-200 rounded-xl">
                                    <div class="flex items-center gap-3 mb-3">
                                        <div class="p-2 bg-blue-100 text-blue-600 rounded-lg"><i data-lucide="database"></i></div>
                                        <h4 class="font-bold">Dữ liệu lớn (Big Data)</h4>
                                    </div>
                                    <p class="text-xs text-slate-500 leading-relaxed">Thu thập và phân tích khối lượng thông tin khổng lồ để phát hiện xu hướng và hành vi người dùng.</p>
                                </div>
                                <div class="p-5 bg-white border border-slate-200 rounded-xl">
                                    <div class="flex items-center gap-3 mb-3">
                                        <div class="p-2 bg-emerald-100 text-emerald-600 rounded-lg"><i data-lucide="wifi"></i></div>
                                        <h4 class="font-bold">Internet vạn vật (IoT)</h4>
                                    </div>
                                    <p class="text-xs text-slate-500 leading-relaxed">Mọi đồ vật (xe cộ, thiết bị gia dụng) được gắn cảm biến và kết nối để tương tác tự động.</p>
                                </div>
                                <div class="p-5 bg-white border border-slate-200 rounded-xl">
                                    <div class="flex items-center gap-3 mb-3">
                                        <div class="p-2 bg-orange-100 text-orange-600 rounded-lg"><i data-lucide="layers"></i></div>
                                        <h4 class="font-bold">Công nghệ in 3D</h4>
                                    </div>
                                    <p class="text-xs text-slate-500 leading-relaxed">Sản xuất các chi tiết phức tạp bằng cách bồi đắp vật liệu, ứng dụng trong cả y học (in mô tạng).</p>
                                </div>
                                <div class="p-5 bg-white border border-slate-200 rounded-xl">
                                    <div class="flex items-center gap-3 mb-3">
                                        <div class="p-2 bg-cyan-100 text-cyan-600 rounded-lg"><i data-lucide="bot"></i></div>
                                        <h4 class="font-bold">Robot thế hệ mới</h4>
                                    </div>
                                    <p class="text-xs text-slate-500 leading-relaxed">Robot có cảm xúc và khả năng làm việc cộng tác an toàn bên cạnh con người.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="border-slate-200">

                <!-- Section 3: Ý nghĩa & Tác động -->
                <section id="y-nghia" class="content-nav">
                    <h2 class="text-3xl font-black text-slate-900 mb-8 flex items-center gap-3 italic">
                        <i data-lucide="trending-up" class="text-emerald-600 w-8 h-8"></i> Ý nghĩa và Tác động đa chiều
                    </h2>
                    
                    <div class="space-y-8">
                        <!-- Kinh tế -->
                        <div class="textbook-card border-l-4 border-l-emerald-500">
                            <h3 class="font-bold text-lg mb-4 text-emerald-700 uppercase tracking-wide">1. Đối với kinh tế</h3>
                            <div class="grid sm:grid-cols-2 gap-6">
                                <div class="list-item text-slate-700">Tăng năng suất lao động đột biến nhờ tự động hóa và AI.</div>
                                <div class="list-item text-slate-700">Tiết kiệm nguyên liệu và chi phí sản xuất (kinh tế xanh).</div>
                                <div class="list-item text-slate-700">Thúc đẩy sự ra đời của các ngành dịch vụ, thương mại điện tử mới.</div>
                                <div class="list-item text-slate-700">Cơ cấu lại nguồn nhân lực: Chuyển dịch từ lao động chân tay sang lao động trí tuệ.</div>
                            </div>
                        </div>

                        <!-- Xã hội & Văn hóa -->
                        <div class="textbook-card border-l-4 border-l-indigo-500">
                            <h3 class="font-bold text-lg mb-4 text-indigo-700 uppercase tracking-wide">2. Đối với xã hội và văn hóa</h3>
                            <div class="grid sm:grid-cols-2 gap-6">
                                <div class="list-item text-slate-700">Cải thiện chất lượng cuộc sống (y tế, giáo dục cá nhân hóa).</div>
                                <div class="list-item text-slate-700">Xây dựng xã hội số, kết nối toàn cầu hóa không biên giới.</div>
                                <div class="list-item text-slate-700">Thách thức về khoảng cách giàu nghèo giữa các quốc gia.</div>
                                <div class="list-item text-slate-700">Vấn đề đạo đức (quyền riêng tư, AI thay thế con người).</div>
                            </div>
                        </div>

                        <!-- Thách thức -->
                        <div class="bg-red-50 border border-red-100 p-6 rounded-2xl">
                            <h3 class="font-bold text-lg mb-4 text-red-700 flex items-center gap-2">
                                <i data-lucide="alert-triangle"></i> Những thách thức cần đối mặt
                            </h3>
                            <div class="grid md:grid-cols-3 gap-4 text-xs">
                                <div class="bg-white p-4 rounded-xl border border-red-50">
                                    <p class="font-bold mb-1 text-red-600">Thất nghiệp</p>
                                    <p class="text-slate-500">Lao động kỹ năng thấp bị thay thế bởi robot.</p>
                                </div>
                                <div class="bg-white p-4 rounded-xl border border-red-50">
                                    <p class="font-bold mb-1 text-red-600">An ninh mạng</p>
                                    <p class="text-slate-500">Tấn công thông tin, đánh cắp dữ liệu cá nhân.</p>
                                </div>
                                <div class="bg-white p-4 rounded-xl border border-red-50">
                                    <p class="font-bold mb-1 text-red-600">Rác thải điện tử</p>
                                    <p class="text-slate-500">Áp lực lớn lên môi trường do thiết bị hỏng hóc.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Sidebar -->
            <div class="lg:col-span-4 space-y-8">
                <!-- AI Assistant Widget -->
                <div class="bg-gradient-to-br from-modern-600 to-indigo-700 text-white p-6 rounded-2xl shadow-xl shadow-modern-100">
                    <h3 class="font-bold text-lg mb-2 flex items-center gap-2">
                        <i data-lucide="sparkles" class="text-yellow-300"></i> Trợ lý AI Học Tập
                    </h3>
                    <p class="text-xs text-modern-100 mb-4 italic">Hỏi AI về kiến thức Bài 7 ngay!</p>
                    <div class="space-y-2">
                        <input type="text" id="ai-input" placeholder="Ví dụ: AI là gì?" class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-sm focus:outline-none focus:bg-white/20 placeholder:text-white/40">
                        <button id="send-btn" class="w-full bg-white text-modern-700 font-bold py-2 rounded-lg text-xs hover:bg-modern-50 transition-colors flex items-center justify-center gap-2">
                            <i data-lucide="message-square" class="w-4 h-4"></i> GỬI CÂU HỎI
                        </button>
                    </div>
                    <div id="ai-status" class="mt-3 text-[10px] text-white/60 hidden">AI đang suy nghĩ...</div>
                    <div id="key-missing-warning" class="mt-3 p-2 bg-red-500/20 border border-red-500/30 rounded text-[10px] hidden">
                        <i data-lucide="alert-circle" class="inline w-3 h-3"></i> Chưa cài đặt API Key trong Settings!
                    </div>
                </div>

                <!-- Fast Facts -->
                <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                    <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                        <i data-lucide="info" class="text-modern-500 w-5 h-5"></i> Dành cho bạn
                    </h3>
                    <div class="space-y-4">
                        <div class="p-3 bg-slate-50 rounded-lg">
                            <p class="text-[10px] font-bold text-slate-400 uppercase">Khái niệm</p>
                            <p class="text-xs font-bold text-slate-800">Kinh tế tri thức</p>
                            <p class="text-[10px] text-slate-500">Kinh tế dựa trên tri thức và công nghệ cao thay vì tài nguyên.</p>
                        </div>
                        <div class="p-3 bg-slate-50 rounded-lg">
                            <p class="text-[10px] font-bold text-slate-400 uppercase">Nhân vật</p>
                            <p class="text-xs font-bold text-slate-800">Alan Turing</p>
                            <p class="text-[10px] text-slate-500">Cha đẻ của khoa học máy tính và trí tuệ nhân tạo.</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Sidebar -->
                <div class="bg-white p-6 rounded-2xl border border-slate-200 sticky top-24 shadow-sm">
                    <h3 class="font-bold text-slate-900 mb-4">Nội dung chính</h3>
                    <ul class="space-y-3 text-sm font-medium">
                        <li><a href="#cmcn3" class="text-slate-500 hover:text-modern-600 block transition-colors">I. CMCN Lần thứ 3</a></li>
                        <li><a href="#cmcn4" class="text-slate-500 hover:text-modern-600 block transition-colors">II. CMCN Lần thứ 4</a></li>
                        <li><a href="#y-nghia" class="text-slate-500 hover:text-modern-600 block transition-colors">III. Ý nghĩa & Tác động</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- AI Response Modal -->
    <div id="ai-modal" class="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm hidden items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-3xl overflow-hidden shadow-2xl">
            <div class="p-6 bg-modern-600 text-white flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <i data-lucide="bot"></i>
                    <h4 class="font-bold">Hỗ trợ Học tập</h4>
                </div>
                <button id="close-modal" class="hover:bg-white/20 p-1 rounded-full"><i data-lucide="x"></i></button>
            </div>
            <div id="ai-response-content" class="p-8 text-sm text-slate-700 leading-relaxed max-h-[60vh] overflow-y-auto whitespace-pre-wrap prose prose-sm"></div>
            <div class="p-4 bg-slate-50 border-t border-slate-100 text-right">
                <button id="close-modal-btn" class="bg-modern-600 text-white px-6 py-2 rounded-full font-bold text-xs">ĐÃ HIỂU</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 py-12">
        <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-8">
            <div class="flex items-center gap-3">
                <img src="/logo.png" alt="Logo" class="w-8 h-8 opacity-40">
                <div>
                    <span class="text-sm font-bold text-slate-900 block leading-tight">EduSpace</span>
                    <span class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">by ND Labs</span>
                </div>
            </div>
            <div class="text-center md:text-left">
                <p class="text-slate-400 text-xs italic">Tài liệu học tập Lịch sử 10 - Bộ sách Kết nối tri thức với cuộc sống.</p>
                <p class="text-slate-300 text-[10px] mt-1">© 2026 ND Labs. Tất cả nội dung được tối ưu cho học tập.</p>
            </div>
            <a href="/eduspace" class="flex items-center gap-2 bg-slate-50 hover:bg-slate-100 px-4 py-2 rounded-lg text-xs font-bold text-slate-500 transition-colors">
                <i data-lucide="home" class="w-4 h-4"></i> TRANG CHỦ
            </a>
        </div>
    </footer>

    <script>
        lucide.createIcons();

        // Constants and State
        const STORAGE_KEY = 'eduspace_gemini_api_key';
        
        // Settings Elements
        const settingsModal = document.getElementById('settings-modal');
        const openSettings = document.getElementById('open-settings');
        const closeSettings = document.getElementById('close-settings');
        const saveSettings = document.getElementById('save-settings');
        const userApiKeyInput = document.getElementById('user-api-key');
        const saveMsg = document.getElementById('save-msg');
        const keyWarning = document.getElementById('key-missing-warning');

        // AI Elements
        const aiInput = document.getElementById('ai-input');
        const sendBtn = document.getElementById('send-btn');
        const aiStatus = document.getElementById('ai-status');
        const aiModal = document.getElementById('ai-modal');
        const aiResponseContent = document.getElementById('ai-response-content');
        const closeModal = document.getElementById('close-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');

        // Initial Load
        window.addEventListener('DOMContentLoaded', () => {
            const savedKey = localStorage.getItem(STORAGE_KEY);
            if (savedKey) {
                userApiKeyInput.value = savedKey;
                keyWarning.classList.add('hidden');
            } else {
                keyWarning.classList.remove('hidden');
            }
        });

        // Settings Actions
        openSettings.onclick = () => settingsModal.classList.remove('hidden');
        closeSettings.onclick = () => settingsModal.classList.add('hidden');
        saveSettings.onclick = () => {
            const key = userApiKeyInput.value.trim();
            if (key) {
                localStorage.setItem(STORAGE_KEY, key);
                saveMsg.classList.remove('hidden');
                keyWarning.classList.add('hidden');
                setTimeout(() => {
                    saveMsg.classList.add('hidden');
                    settingsModal.classList.add('hidden');
                }, 1000);
            }
        };

        // AI Fetch Function
        async function fetchAI(query) {
            const currentKey = localStorage.getItem(STORAGE_KEY);
            
            if (!currentKey) {
                settingsModal.classList.remove('hidden');
                return;
            }

            aiStatus.classList.remove('hidden');
            sendBtn.disabled = true;
            
            const systemPrompt = "Bạn là trợ lý học tập AI chuyên về Lịch sử 10. Hãy giải thích các khái niệm, thành tựu của CMCN lần 3 và 4 một cách dễ hiểu, chính xác theo kiến thức giáo khoa Việt Nam.";
            
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${currentKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: query }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });

                if (response.status === 401 || response.status === 403) throw new Error('API Key không hợp lệ.');
                if (!response.ok) throw new Error('Lỗi kết nối AI.');

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                showAIResponse(text || "AI không trả về nội dung.");
            } catch (error) {
                showAIResponse(`Lỗi: ${error.message}`);
            } finally {
                aiStatus.classList.add('hidden');
                sendBtn.disabled = false;
            }
        }

        function showAIResponse(text) {
            aiResponseContent.innerText = text;
            aiModal.classList.remove('hidden');
            aiModal.classList.add('flex');
        }

        sendBtn.onclick = () => {
            const query = aiInput.value.trim();
            if (query) {
                fetchAI(query);
                aiInput.value = '';
            }
        };

        aiInput.onkeypress = (e) => { if (e.key === 'Enter') sendBtn.onclick(); };
        closeModal.onclick = closeModalBtn.onclick = () => {
            aiModal.classList.add('hidden');
            aiModal.classList.remove('flex');
        };

        window.onclick = (e) => {
            if (e.target == settingsModal) settingsModal.classList.add('hidden');
            if (e.target == aiModal) aiModal.classList.add('hidden');
        };
    </script>
</body>
</html>